import{f as G,T as y,d as x,G as J,Y as W,K as e,q as Y,j as p,v as g,S as E,g as Z,p as o,$ as S,X as d,r as w,J as T,a as A,c as B,t as h,Z as u,s as m,o as q}from"./index-c2be6f26.js";import{E as Q}from"./Navbar-a4e8e732-1eb05fa5.js";import{s as ee}from"./_plugin-vue_export-helper-c27b6911-f875bd67.js";const te=G("admin",{state:()=>({products:y([]),users:y([]),loading:!1,title:"",description:"",code:"",price:"",stock:"",category:"",pidForUpdate:"",titleUpdate:"",descriptionUpdate:"",codeUpdate:"",priceUpdate:"",stockUpdate:"",categoryUpdate:"",images:[],userpidForUpdate:"",userProfileNameForUpdate:"",userRoleForUpdate:""}),actions:{async handleFileUpload(r){this.images=[],console.log("call method handle files"),console.log(r.target.files);const t=r.target.files;if(t&&t.length>4&&Swal.fire({title:"Alert",text:"Only a maximum of 5 images will be uploaded.",icon:"warning",confirmButtonText:"OK"}),t&&t.length>0){let i=0;for(const c of t)i<5&&this.images.push(c),i++}console.log(this.images)},async fetchAllUsers(){var r,t;try{const i="https://backend-production-2f21.up.railway.app/api/users",c=await x.get(i);console.log(c),(r=c.data)!=null&&r.data&&((t=c.data)==null?void 0:t.data.length)>0&&(console.log("store users found"),this.users=c.data.data,console.log(this.users))}catch(i){console.log(i)}},async createNewProduct(){let r=new FormData;r.append("title",this.title),r.append("description",this.description),r.append("code",this.code),r.append("price",this.price),r.append("stock",this.stock),r.append("category",this.category),r.append("status",1);for(let t=0;t<this.images.length;t++)t<5&&r.append("thumbnails",this.images[t]);console.log("sending form",r);try{const t="https://backend-production-2f21.up.railway.app/api/products",i=await x.post(t,r,{headers:{"Content-Type":"multipart/form-data"},data:r});return i&&i.data.status==!0&&(this.title="",this.description="",this.code="",this.price="",this.stock="",this.category="",this.getProducts()),i.data}catch(t){console.log("create product fails"),console.error(t)}return{status:!1,message:"Product creation error"}},async updateProduct(r){if(r===this.pidForUpdate){let t={title:this.titleUpdate,description:this.descriptionUpdate,code:this.codeUpdate,price:this.priceUpdate,stock:this.stockUpdate,category:this.categoryUpdate,status:!0,thumbnails:[]};try{const i=`https://backend-production-2f21.up.railway.app/api/products/${r}`,c=await x.put(i,t);return c&&c.data.status==!0&&(this.pidForUpdate="",this.titleUpdate="",this.descriptionUpdate="",this.codeUpdate="",this.priceUpdate="",this.stockUpdate="",this.categoryUpdate="",this.getProducts()),c.data}catch(i){if(console.log("update products fails"),console.error(i),i.response.data)return i.response.data}}else console.error("PIDS NOT MATCH ERROR");return{status:!1,message:"Product update error"}},async getProducts(){console.log("calling get products (admin)");try{const r="https://backend-production-2f21.up.railway.app/api/products",t=await x.get(r);this.products=await t.data}catch(r){console.log("request get all products fails"),console.log(r)}},async getProductsFiltered(r){let t=1;r=="NEXT"&&(t=this.products.nextPage),r=="PREV"&&(t=this.products.prevPage);const i=`https://backend-production-2f21.up.railway.app/api/products?page=${t}`,c=await x.get(i);this.products=await c.data},async removeItem(r){try{const t=`https://backend-production-2f21.up.railway.app/api/products/${r}`,i=await x.delete(t);return i&&i.data.status==!0&&this.getProducts(),i.data}catch(t){if(console.error(t),t.response.data)return t.response.data}return{status:!1,message:"Delete product fail"}},async updateUser(r){if(r===this.userpidForUpdate){let t={profile_name:this.userProfileNameForUpdate,role:this.userRoleForUpdate};try{const i=`https://backend-production-2f21.up.railway.app/api/users/${r}`,c=await x.put(i,t);return console.log("RESPONSE UPDATE USER"),console.log(c),c&&c.data.isvalid==!0&&(console.log("resposne is Valid!"),this.userpidForUpdate="",this.userProfileNameForUpdate="",this.userRoleForUpdate="",this.fetchAllUsers()),c.data}catch(i){if(console.log("update users fails"),console.error(i),i.response.data)return i.response.data}}else console.error("PIDS NOT MATCH ERROR");return{isValid:!1,status:!1,message:"User update error"}},async deleteAllUsers(){console.log("DELETE ALL USERS CALL");try{const r="https://backend-production-2f21.up.railway.app/api/users",t=await x.delete(r);return console.log("RESPONSE DELETE ALL USERS"),console.log(t),t.data}catch(r){if(console.log("delete all users fails"),console.error(r),r.response.data)return r.response.data}},async deleteUser(r){try{const t=`https://backend-production-2f21.up.railway.app/api/users/${r}`,i=await x.delete(t);return console.log("RESPONSE DELETE ONE USERS with pid "+r),console.log(i),i.data}catch(t){if(console.log("delete one users fails"),console.error(t),t.response.data)return t.response.data}}}}),l=r=>(J("data-v-9aaba4ae"),r=r(),W(),r),se={class:"container mx-auto px-4 sm:px-6 lg:px-8"},ae={class:"flex flex-col lg:flex-row lg:justify-between"},oe={class:"w-full lg:w-3/3"},re={class:"flex flex-col mt-8"},le={class:"flex justify-between"},ie=l(()=>e("h2",{class:"text-lg font-medium leading-6 text-gray-900"},"Product List",-1)),ce={key:0,class:"flex mt-2 mb-2 custom-success"},ne={style:{width:"95%","text-align":"center","text-transform":"uppercase"},class:"mt-2 mb-2"},de={key:0,class:"flex mt-2 mb-2 custom-error"},ue={style:{width:"90%","text-align":"center"},class:"mt-2 mb-2"},pe={class:"flex-1 mt-4"},ge={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},fe=l(()=>e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Product "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Code "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Description "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Price "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Category "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Stock "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Actions ")])],-1)),xe={class:"bg-white divide-y divide-gray-200"},ye={class:"px-6 py-4 whitespace-nowrap"},he={class:"flex items-center"},we={class:"flex-shrink-0 w-10 h-10"},be=["src"],ve={class:"ml-4"},Ue={class:"text-sm font-medium text-gray-900"},ke={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"text-sm text-gray-900"},Pe={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"text-sm text-gray-900"},Se={class:"px-6 py-4 whitespace-nowrap"},Te={class:"text-sm text-gray-900"},Re={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"text-sm text-gray-900"},qe={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"text-sm text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap"},Oe={style:{"justify-content":"space-evenly"},class:"flex"},De=["onClick"],Be=l(()=>e("svg",{class:"w-4 h-4 fill-current","enable-background":"new 0 0 128 128",height:"20px",id:"Layer_1",version:"1.1",viewBox:"0 0 128 128",width:"128px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[e("g",null,[e("path",{d:"M18.233,81.666l-0.016,0.003c0.006,0.012,0.01,0.022,0.016,0.036c0.008,0.101,0.026,0.195,0.04,0.293   c0.002,0.017,0,0.029,0.002,0.045l3.929,25.514c0.476,3.098,3.374,5.221,6.47,4.743c3.098-0.476,5.222-3.372,4.746-6.471   l-0.611-3.965c0.712,0.587,1.43,1.169,2.175,1.714c10.106,7.42,23.111,10.987,36.486,8.926c13.372-2.056,24.702-9.37,32.109-19.487   c3.662-4.988,6.353-10.695,7.922-16.793l-15.479-4.262c-1.044,4.191-2.882,8.109-5.405,11.552   c-5.012,6.824-12.566,11.713-21.593,13.105c-9.027,1.388-17.705-1.002-24.536-6.004c-0.841-0.616-1.645-1.282-2.424-1.976   l4.488,0.435c2.872,0.276,5.445-2.025,5.748-5.144c0.3-3.12-1.783-5.873-4.655-6.15l-23.659-2.291   c-2.568-0.248-4.884,1.572-5.564,4.188c-0.05,0.185-0.076,0.374-0.109,0.565c-0.021,0.132-0.061,0.255-0.074,0.39   c-0.004,0.041,0.002,0.077-0.001,0.114c-0.013,0.174-0.004,0.351-0.002,0.528C18.235,81.406,18.224,81.539,18.233,81.666z",fill:"#232323"}),e("path",{d:"M109.767,46.334l0.015-0.002c-0.006-0.013-0.01-0.024-0.016-0.037c-0.008-0.1-0.027-0.195-0.04-0.293   c-0.002-0.015,0-0.029-0.002-0.044l-3.928-25.513c-0.477-3.097-3.373-5.221-6.472-4.744c-3.097,0.477-5.221,3.373-4.744,6.47   l0.612,3.967c-0.715-0.587-1.433-1.169-2.177-1.715c-10.106-7.419-23.112-10.989-36.484-8.926   c-13.374,2.055-24.703,9.371-32.109,19.487c-3.664,4.989-6.355,10.696-7.922,16.794l15.479,4.26   c1.042-4.19,2.882-8.108,5.403-11.551c5.012-6.824,12.569-11.712,21.595-13.105c9.027-1.386,17.703,1.002,24.536,6.002   c0.841,0.618,1.645,1.284,2.423,1.976l-4.487-0.434c-2.872-0.278-5.445,2.026-5.747,5.144c-0.303,3.119,1.782,5.873,4.653,6.15   l23.659,2.291c2.568,0.248,4.884-1.572,5.564-4.188c0.05-0.184,0.076-0.374,0.107-0.565c0.022-0.132,0.063-0.255,0.075-0.391   c0.006-0.038-0.003-0.075,0-0.112c0.014-0.175,0.007-0.353,0.003-0.53C109.764,46.595,109.774,46.462,109.767,46.334z",fill:"#232323"})])],-1)),Ne=[Be],je=["onClick"],Ke=l(()=>e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM6.3 6.3a1 1 0 011.4 0L10 8.6l2.3-2.3a1 1 0 011.4 1.4L11.4 10l2.3 2.3a1 1 0 01-1.4 1.4L10 11.4l-2.3 2.3a1 1 0 01-1.4-1.4L8.6 10 6.3 7.7a1 1 0 010-1.4z"})],-1)),Ve=[Ke],_e={key:0,class:"bg-gray-100 pt-4"},$e={class:"flex justify-center"},ze={key:1,class:"bg-gray-100 pt-4"},Me={class:"flex justify-center"},Xe={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center"},Ie=l(()=>e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),He={class:"space-y-12"},Ge=l(()=>e("div",{class:"border-b border-gray-900/10 pb-12"},[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"NEW PRODUCT")],-1)),Je={class:"border-b border-gray-900/10 pb-12"},We={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},Ye={class:"sm:col-span-3"},Ze=l(()=>e("label",{for:"title",class:"block text-sm font-medium leading-6 text-gray-900"},"Title",-1)),Qe={class:"mt-2"},et={class:"sm:col-span-3"},tt=l(()=>e("label",{for:"description",class:"block text-sm font-medium leading-6 text-gray-900"},"Description",-1)),st={class:"mt-2"},at={class:"sm:col-span-4"},ot=l(()=>e("label",{for:"code",class:"block text-sm font-medium leading-6 text-gray-900"},"Code",-1)),rt={class:"mt-2"},lt={class:"sm:col-span-3"},it=l(()=>e("label",{for:"category",class:"block text-sm font-medium leading-6 text-gray-900"},"Category",-1)),ct={class:"mt-2"},nt=l(()=>e("option",null,"Nike",-1)),dt=l(()=>e("option",null,"Adidas",-1)),ut=l(()=>e("option",null,"Puma",-1)),pt=[nt,dt,ut],gt={class:"col-span-full"},mt=l(()=>e("label",{for:"stock",class:"block text-sm font-medium leading-6 text-gray-900"},"Stock",-1)),ft={class:"mt-2"},xt={class:"sm:col-span-2 sm:col-start-1"},yt=l(()=>e("label",{for:"price",class:"block text-sm font-medium leading-6 text-gray-900"},"Price",-1)),ht={class:"mt-2"},wt={class:"sm:col-span-2 sm:col-start-1"},bt=l(()=>e("label",{for:"file",class:"block text-sm font-medium leading-6 text-gray-900"},"Images",-1)),vt={class:"mt-2"},Ut={class:"flex justify-between mt-6"},kt={key:0,class:"flex mt-2 mb-2 custom-error"},Et={style:{width:"90%","text-align":"center"},class:"mt-2 mb-2"},Pt={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center"},Ct=l(()=>e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),St={class:"space-y-12"},Tt=l(()=>e("div",{class:"border-b border-gray-900/10 pb-12"},[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"UPDATE PRODUCT")],-1)),Rt={class:"border-b border-gray-900/10 pb-12"},At={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},qt={class:"sm:col-span-3"},Ft=l(()=>e("label",{for:"title",class:"block text-sm font-medium leading-6 text-gray-900"},"Title",-1)),Lt={class:"mt-2"},Ot={class:"sm:col-span-3"},Dt=l(()=>e("label",{for:"description",class:"block text-sm font-medium leading-6 text-gray-900"},"Description",-1)),Bt={class:"mt-2"},Nt={class:"sm:col-span-4"},jt=l(()=>e("label",{for:"code",class:"block text-sm font-medium leading-6 text-gray-900"},"Code",-1)),Kt={class:"mt-2"},Vt={class:"sm:col-span-3"},_t=l(()=>e("label",{for:"category",class:"block text-sm font-medium leading-6 text-gray-900"},"Category",-1)),$t={class:"mt-2"},zt=l(()=>e("option",null,"Nike",-1)),Mt=l(()=>e("option",null,"Adidas",-1)),Xt=l(()=>e("option",null,"Puma",-1)),It=[zt,Mt,Xt],Ht={class:"col-span-full"},Gt=l(()=>e("label",{for:"stock",class:"block text-sm font-medium leading-6 text-gray-900"},"Stock",-1)),Jt={class:"mt-2"},Wt={class:"sm:col-span-2 sm:col-start-1"},Yt=l(()=>e("label",{for:"price",class:"block text-sm font-medium leading-6 text-gray-900"},"Price",-1)),Zt={class:"mt-2"},Qt={class:"flex justify-between mt-6"},es={key:0,class:"flex mt-2 mb-2 custom-error"},ts={style:{width:"90%","text-align":"center"},class:"mt-2 mb-2"},ss={key:2,class:"container mx-auto px-4 sm:px-6 lg:px-8 p-4"},as={class:"flex flex-col lg:flex-row lg:justify-between"},os={class:"w-full lg:w-3/3"},rs={class:"flex flex-col mt-8"},ls={class:"flex justify-between"},is=l(()=>e("h2",{class:"text-lg font-medium leading-6 text-gray-900"},"Users List",-1)),cs={class:"flex-1 mt-4"},ns={class:"overflow-x-auto"},ds={class:"min-w-full divide-y divide-gray-200"},us=l(()=>e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Username "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Profile Name "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Role "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Actions ")])],-1)),ps={class:"bg-white divide-y divide-gray-200"},gs={class:"px-6 py-4 whitespace-nowrap"},ms={class:"text-sm text-gray-900"},fs={class:"px-6 py-4 whitespace-nowrap"},xs={class:"text-sm text-gray-900"},ys={class:"px-6 py-4 whitespace-nowrap"},hs={class:"text-sm text-gray-900"},ws={class:"px-6 py-4 whitespace-nowrap"},bs={style:{"justify-content":"space-evenly"},class:"flex"},vs=["onClick"],Us=l(()=>e("svg",{class:"w-4 h-4 fill-current","enable-background":"new 0 0 128 128",height:"20px",id:"Layer_1",version:"1.1",viewBox:"0 0 128 128",width:"128px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[e("g",null,[e("path",{d:"M18.233,81.666l-0.016,0.003c0.006,0.012,0.01,0.022,0.016,0.036c0.008,0.101,0.026,0.195,0.04,0.293   c0.002,0.017,0,0.029,0.002,0.045l3.929,25.514c0.476,3.098,3.374,5.221,6.47,4.743c3.098-0.476,5.222-3.372,4.746-6.471   l-0.611-3.965c0.712,0.587,1.43,1.169,2.175,1.714c10.106,7.42,23.111,10.987,36.486,8.926c13.372-2.056,24.702-9.37,32.109-19.487   c3.662-4.988,6.353-10.695,7.922-16.793l-15.479-4.262c-1.044,4.191-2.882,8.109-5.405,11.552   c-5.012,6.824-12.566,11.713-21.593,13.105c-9.027,1.388-17.705-1.002-24.536-6.004c-0.841-0.616-1.645-1.282-2.424-1.976   l4.488,0.435c2.872,0.276,5.445-2.025,5.748-5.144c0.3-3.12-1.783-5.873-4.655-6.15l-23.659-2.291   c-2.568-0.248-4.884,1.572-5.564,4.188c-0.05,0.185-0.076,0.374-0.109,0.565c-0.021,0.132-0.061,0.255-0.074,0.39   c-0.004,0.041,0.002,0.077-0.001,0.114c-0.013,0.174-0.004,0.351-0.002,0.528C18.235,81.406,18.224,81.539,18.233,81.666z",fill:"#232323"}),e("path",{d:"M109.767,46.334l0.015-0.002c-0.006-0.013-0.01-0.024-0.016-0.037c-0.008-0.1-0.027-0.195-0.04-0.293   c-0.002-0.015,0-0.029-0.002-0.044l-3.928-25.513c-0.477-3.097-3.373-5.221-6.472-4.744c-3.097,0.477-5.221,3.373-4.744,6.47   l0.612,3.967c-0.715-0.587-1.433-1.169-2.177-1.715c-10.106-7.419-23.112-10.989-36.484-8.926   c-13.374,2.055-24.703,9.371-32.109,19.487c-3.664,4.989-6.355,10.696-7.922,16.794l15.479,4.26   c1.042-4.19,2.882-8.108,5.403-11.551c5.012-6.824,12.569-11.712,21.595-13.105c9.027-1.386,17.703,1.002,24.536,6.002   c0.841,0.618,1.645,1.284,2.423,1.976l-4.487-0.434c-2.872-0.278-5.445,2.026-5.747,5.144c-0.303,3.119,1.782,5.873,4.653,6.15   l23.659,2.291c2.568,0.248,4.884-1.572,5.564-4.188c0.05-0.184,0.076-0.374,0.107-0.565c0.022-0.132,0.063-0.255,0.075-0.391   c0.006-0.038-0.003-0.075,0-0.112c0.014-0.175,0.007-0.353,0.003-0.53C109.764,46.595,109.774,46.462,109.767,46.334z",fill:"#232323"})])],-1)),ks=[Us],Es=["onClick"],Ps=l(()=>e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM6.3 6.3a1 1 0 011.4 0L10 8.6l2.3-2.3a1 1 0 011.4 1.4L11.4 10l2.3 2.3a1 1 0 01-1.4 1.4L10 11.4l-2.3 2.3a1 1 0 01-1.4-1.4L8.6 10 6.3 7.7a1 1 0 010-1.4z"})],-1)),Cs=[Ps],Ss={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center"},Ts=l(()=>e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),Rs={class:"space-y-12"},As=l(()=>e("div",{class:"border-b border-gray-900/10 pb-12"},[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"UPDATE USER")],-1)),qs={class:"border-b border-gray-900/10 pb-12"},Fs={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},Ls={class:"sm:col-span-3"},Os=l(()=>e("label",{for:"Profile name",class:"block text-sm font-medium leading-6 text-gray-900"},"Profile name",-1)),Ds={class:"mt-2"},Bs={class:"sm:col-span-3"},Ns=l(()=>e("label",{for:"User role",class:"block text-sm font-medium leading-6 text-gray-900"},"Role",-1)),js={class:"mt-2"},Ks=l(()=>e("option",null,"premium",-1)),Vs=l(()=>e("option",null,"user",-1)),_s=[Ks,Vs],$s={class:"flex justify-between mt-6"},zs={__name:"AdminView",setup(r){const t=te(),i=Y();y(0);let c=y(!1),b=y(!1),f=null,F=y(!1),P=y(!1),v=y(!1),L="",C="",U="",k=y(!1);t.getProducts(),console.log(i.user.role),i.user.role=="admin"&&t.fetchAllUsers();async function N(n){f=await t.products.payload.find(s=>s._id==n),f?(t.pidForUpdate=f.id,t.titleUpdate=f.title,t.descriptionUpdate=f.description,t.codeUpdate=f.code,t.categoryUpdate=f.category,t.priceUpdate=f.price,t.stockUpdate=f.stock,b.value=!0):Swal.fire({title:"Error!",text:"Ups, product with "+n+" not found for update!",icon:"error",confirmButtonText:"OK"})}async function j(n){const s=await t.removeItem(n);s.status==!0?Swal.fire({title:"Success!",text:s.message,icon:"success",confirmButtonText:"OK"}):Swal.fire({title:"Error!",text:s.message,icon:"error",confirmButtonText:"OK"})}async function K(n,s,a){console.log("MODAL UPDATE USER CALL"),console.log(n,s,a),n?(t.userpidForUpdate=n,t.userProfileNameForUpdate=s,t.userRoleForUpdate=a,k.value=!0):Swal.fire({title:"Error!",text:"Ups, user with "+n+" not found for update!",icon:"error",confirmButtonText:"OK"})}async function V(n){console.log("delete user for uid ",n);const s=await t.deleteUser(n);s.isvalid==!0?(Swal.fire({title:"Success!",text:s.message,icon:"success",confirmButtonText:"OK"}),t.fetchAllUsers()):Swal.fire({title:"Error!",text:s.message,icon:"error",confirmButtonText:"OK"})}async function _(){const n=t;Swal.fire({title:"Do you want to delete all users that have been not connection in the past two days?",showCancelButton:!0,confirmButtonText:"DELETE"}).then(async s=>{if(s.isConfirmed){const a=await n.deleteAllUsers();console.log("res isvalid",a.isvalid),a.isvalid==!0?Swal.fire({title:"Success!",icon:"success",text:a.message,confirmButtonText:"OK"}):Swal.fire({title:"Error!",icon:"error",text:a.message?a.message:"Ups. the operation fails",confirmButtonText:"OK"}),n.fetchAllUsers()}})}async function $(n){console.log("UPDATE USER CALL FOR ",n);const s=await t.updateUser(n);s.isvalid==!0?(k.value=!1,Swal.fire({title:"Success!",icon:"success",text:s.message,confirmButtonText:"OK"})):(console.log(s.message),Swal.fire({title:"Error!",icon:"error",text:s.message?s.message:"Unknown error updating user",confirmButtonText:"OK"}),this.store.fetchAllUsers())}async function z(n){const s=await t.updateProduct(n);s.status==!0?(b.value=!1,Swal.fire({title:"Success!",icon:"success",text:s.message,confirmButtonText:"OK"})):(console.log(s.message),Swal.fire({title:"Error!",icon:"error",text:s.message,confirmButtonText:"OK"}))}async function M(){const n=await t.createNewProduct();n.status==!0?(c.value=!1,Swal.fire({title:"Success!",icon:"success",text:n.message,confirmButtonText:"OK"})):(console.log(n.message),Swal.fire({title:"Error!",icon:"error",text:n.message,confirmButtonText:"OK"}))}function X(){F.value=!1,L=""}function I(){P.value=!1,C=""}function O(){v.value=!1,U=""}function D(){c.value=!1,b.value=!1,P.value=!1,v.value=!1,U="",C=""}function H(){c.value=!1,b.value=!1,k.value=!1,P.value=!1,v.value=!1,U="",C=""}return(n,s)=>(p(),g(A,null,[E(Q),e("div",se,[e("div",ae,[e("div",oe,[e("div",re,[e("div",le,[ie,e("button",{onClick:s[0]||(s[0]=a=>Z(c)?c.value=!o(c):c=!o(c)),class:"mt-4 bg-gray-800 p-4 text-white text-center py-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-50"}," NEW PRODUCT ")]),E(T,{name:"fade",duration:{enter:"1000",leave:"2000"}},{default:S(()=>[o(F)?(p(),g("div",ce,[e("div",ne,d(o(L)),1),e("button",{style:{width:"5%"},class:"",onClick:X},"X")])):w("",!0)]),_:1}),E(T,{name:"fade",duration:{enter:"1000",leave:"2000"}},{default:S(()=>[o(P)?(p(),g("div",de,[e("div",ue,d(o(C)),1),e("button",{style:{width:"10%"},class:"",onClick:I},"X")])):w("",!0)]),_:1}),e("div",pe,[e("div",ge,[e("table",me,[fe,e("tbody",xe,[(p(!0),g(A,null,B(o(t).products.payload,a=>(p(),g("tr",null,[e("td",ye,[e("div",he,[e("div",we,[e("img",{class:"w-full h-full object-contain rounded-md",src:a.thumbnails?a.thumbnails[0]:"",alt:""},null,8,be)]),e("div",ve,[e("div",Ue,d(a.title),1)])])]),e("td",ke,[e("div",Ee,d(a.code),1)]),e("td",Pe,[e("div",Ce,d(a.description),1)]),e("td",Se,[e("div",Te,d(a.price),1)]),e("td",Re,[e("div",Ae,d(a.category),1)]),e("td",qe,[e("div",Fe,d(a.stock),1)]),e("td",Le,[e("div",Oe,[e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R=>N(a._id),"aria-label":"Update item"},Ne,8,De),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R=>j(a._id),"aria-label":"Remove item"},Ve,8,je)])])]))),256))])])])])])])])]),o(t).products&&o(t).products.payload?(p(),g("section",_e,[e("div",$e,[e("button",{class:h(o(t).products.hasPrevPage?"flex items-center justify-center rounded-md bg-gray-900 px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-blue-300":"flex items-center justify-center rounded-md bg-gray-900 px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-blue-300 disabled-opacity-50"),onClick:s[1]||(s[1]=a=>o(t).getProductsFiltered("PREV"))},"PREV",2),e("button",{class:h(o(t).products.hasNextPage?"flex items-center justify-center rounded-md bg-gray-900 px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-blue-300":"flex items-center justify-center rounded-md bg-gray-900 px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-blue-300 disabled-opacity-50"),onClick:s[2]||(s[2]=a=>o(t).getProductsFiltered("NEXT"))},"NEXT",2)])])):w("",!0),o(t).products&&o(t).products.payload?(p(),g("section",ze,[e("div",Me,[e("span",null,"PAGE: "+d(o(t).products.page),1)])])):w("",!0),e("div",{class:h([o(c)?"scale-100":"","fixed scale-0 z-10 inset-0 overflow-y-auto"])},[e("div",Xe,[Ie,e("div",{class:h([o(c)?"scale-100":"","transform scale-0 transition-transform duration-300 relative z-10 w-full max-w-md p-6 bg-white rounded-lg shadow-lg"])},[e("div",He,[Ge,e("div",Je,[e("div",We,[e("div",Ye,[Ze,e("div",Qe,[u(e("input",{required:"required","onUpdate:modelValue":s[3]||(s[3]=a=>o(t).title=a),type:"text",name:"title",id:"title",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[m,o(t).title]])])]),e("div",et,[tt,e("div",st,[u(e("input",{required:"required","onUpdate:modelValue":s[4]||(s[4]=a=>o(t).description=a),type:"text",name:"description",id:"description",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[m,o(t).description]])])]),e("div",at,[ot,e("div",rt,[u(e("input",{required:"required","onUpdate:modelValue":s[5]||(s[5]=a=>o(t).code=a),id:"code",name:"code",type:"text",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[m,o(t).code]])])]),e("div",lt,[it,e("div",ct,[u(e("select",{required:"required","onUpdate:modelValue":s[6]||(s[6]=a=>o(t).category=a),id:"category",name:"category",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},pt,512),[[q,o(t).category]])])]),e("div",gt,[mt,e("div",ft,[u(e("input",{required:"required","onUpdate:modelValue":s[7]||(s[7]=a=>o(t).stock=a),type:"number",name:"stock",id:"stock",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[m,o(t).stock]])])]),e("div",xt,[yt,e("div",ht,[u(e("input",{required:"required","onUpdate:modelValue":s[8]||(s[8]=a=>o(t).price=a),type:"number",step:"0.01",name:"price",id:"price",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline6"},null,512),[[m,o(t).price]])])]),e("div",wt,[bt,e("div",vt,[e("input",{type:"file",multiple:"",onChange:s[9]||(s[9]=(...a)=>o(t).handleFileUpload&&o(t).handleFileUpload(...a))},null,32)])])])])]),e("div",Ut,[e("button",{onClick:s[10]||(s[10]=a=>M()),class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," CREATE "),e("button",{onClick:D,class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," BACK ")]),E(T,{name:"fade",duration:{enter:"1000",leave:"2000"}},{default:S(()=>[o(v)?(p(),g("div",kt,[e("div",Et,d(o(U)),1),e("button",{style:{width:"10%"},class:"",onClick:O},"X")])):w("",!0)]),_:1})],2)])],2),e("div",{class:h([o(b)?"scale-100":"","fixed scale-0 z-10 inset-0 overflow-y-auto"])},[e("div",Pt,[Ct,e("div",{class:h([o(b)?"scale-100":"","transform scale-0 transition-transform duration-300 relative z-10 w-full max-w-md p-6 bg-white rounded-lg shadow-lg"])},[e("div",St,[Tt,e("div",Rt,[e("div",At,[e("div",qt,[Ft,e("div",Lt,[u(e("input",{required:"required","onUpdate:modelValue":s[11]||(s[11]=a=>o(t).titleUpdate=a),type:"text",name:"title",id:"title",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,o(t).titleUpdate]])])]),e("div",Ot,[Dt,e("div",Bt,[u(e("input",{required:"required","onUpdate:modelValue":s[12]||(s[12]=a=>o(t).descriptionUpdate=a),type:"text",name:"description",id:"description",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,o(t).descriptionUpdate]])])]),e("div",Nt,[jt,e("div",Kt,[u(e("input",{required:"required","onUpdate:modelValue":s[13]||(s[13]=a=>o(t).codeUpdate=a),id:"code",name:"code",type:"text",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,o(t).codeUpdate]])])]),e("div",Vt,[_t,e("div",$t,[u(e("select",{required:"required","onUpdate:modelValue":s[14]||(s[14]=a=>o(t).categoryUpdate=a),id:"category",name:"category",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"},It,512),[[q,o(t).categoryUpdate]])])]),e("div",Ht,[Gt,e("div",Jt,[u(e("input",{required:"required","onUpdate:modelValue":s[15]||(s[15]=a=>o(t).stockUpdate=a),type:"number",name:"stock",id:"stock",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,o(t).stockUpdate]])])]),e("div",Wt,[Yt,e("div",Zt,[u(e("input",{required:"required","onUpdate:modelValue":s[16]||(s[16]=a=>o(t).priceUpdate=a),type:"number",step:"0.01",name:"price",id:"price",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,o(t).priceUpdate]])])])])])]),e("div",Qt,[e("button",{onClick:s[17]||(s[17]=a=>z(o(t).pidForUpdate)),class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," UPDATE "),e("button",{onClick:D,class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," BACK ")]),E(T,{name:"fade",duration:{enter:"1000",leave:"2000"}},{default:S(()=>[o(v)?(p(),g("div",es,[e("div",ts,d(o(U)),1),e("button",{style:{width:"10%"},class:"",onClick:O},"X")])):w("",!0)]),_:1})],2)])],2),o(i).user.role=="admin"?(p(),g("div",ss,[e("div",as,[e("div",os,[e("div",rs,[e("div",ls,[is,e("button",{onClick:s[18]||(s[18]=a=>_()),class:"mt-4 bg-gray-800 p-4 text-white text-center py-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-50"}," DELETE ALL USERS ")]),e("div",cs,[e("div",ns,[e("table",ds,[us,e("tbody",ps,[(p(!0),g(A,null,B(o(t).users,a=>(p(),g("tr",null,[e("td",gs,[e("div",ms,d(a.username),1)]),e("td",fs,[e("div",xs,d(a.profile_name),1)]),e("td",ys,[e("div",hs,d(a.role),1)]),e("td",ws,[e("div",bs,[e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R=>K(a.uid,a.profile_name,a.role),"aria-label":"Update User"},ks,8,vs),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R=>V(a.uid),"aria-label":"Remove User"},Cs,8,Es)])])]))),256))])])])])])])])])):w("",!0),e("div",{class:h([o(k)?"scale-100":"","fixed scale-0 z-10 inset-0 overflow-y-auto"])},[e("div",Ss,[Ts,e("div",{class:h([o(k)?"scale-100":"","transform scale-0 transition-transform duration-300 relative z-10 w-full max-w-md p-6 bg-white rounded-lg shadow-lg"])},[e("div",Rs,[As,e("div",qs,[e("div",Fs,[e("div",Ls,[Os,e("div",Ds,[u(e("input",{required:"required","onUpdate:modelValue":s[19]||(s[19]=a=>o(t).userProfileNameForUpdate=a),type:"text",name:"profile_name",id:"profile_name",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,o(t).userProfileNameForUpdate]])])]),e("div",Bs,[Ns,e("div",js,[u(e("select",{required:"required","onUpdate:modelValue":s[20]||(s[20]=a=>o(t).userRoleForUpdate=a),id:"user_role",name:"User role",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"},_s,512),[[q,o(t).userRoleForUpdate]])])])])])]),e("div",$s,[e("button",{onClick:s[21]||(s[21]=a=>$(o(t).userpidForUpdate)),class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," UPDATE "),e("button",{onClick:H,class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," BACK ")])],2)])],2)],64))}},Hs=ee(zs,[["__scopeId","data-v-9aaba4ae"]]);export{Hs as default};
