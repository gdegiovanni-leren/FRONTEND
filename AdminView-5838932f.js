import{B as W,r as x,y as h,u as G,o as p,c as g,f as k,a as e,i as J,d as i,g as S,T as C,F as T,l as B,n as _,x as y,t as d,b as u,v as m,p as A,z as Q,A as Y}from"./index-a8778838.js";import{_ as Z}from"./Navbar-dc94fa7c.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";const te=W("admin",{state:()=>({products:x([]),users:x([]),loading:!1,title:"",description:"",code:"",price:"",stock:"",category:"",pidForUpdate:"",titleUpdate:"",descriptionUpdate:"",codeUpdate:"",priceUpdate:"",stockUpdate:"",categoryUpdate:"",images:[],userpidForUpdate:"",userProfileNameForUpdate:"",userRoleForUpdate:""}),actions:{async handleFileUpload(a){this.images=[],console.log("call method handle files"),console.log(a.target.files);const t=a.target.files;if(t&&t.length>4&&Swal.fire({title:"Alert",text:"Only a maximum of 5 images will be uploaded.",icon:"warning",confirmButtonText:"OK"}),t&&t.length>0){let n=0;for(const r of t)n<5&&this.images.push(r),n++}console.log(this.images)},async fetchAllUsers(){var a,t;try{const n="http:localhost:8080/api/users",r=await h.get(n);console.log(r),(a=r.data)!=null&&a.data&&((t=r.data)==null?void 0:t.data.length)>0&&(console.log("store users found"),this.users=r.data.data,console.log(this.users))}catch(n){console.log(n)}},async createNewProduct(){let a=new FormData;a.append("title",this.title),a.append("description",this.description),a.append("code",this.code),a.append("price",this.price),a.append("stock",this.stock),a.append("category",this.category),a.append("status",1);for(let t=0;t<this.images.length;t++)t<5&&a.append("thumbnails",this.images[t]);console.log("sending form",a);try{const t="http:localhost:8080/api/products",n=await h.post(t,a,{headers:{"Content-Type":"multipart/form-data"},data:a});return n&&n.data.status==!0&&(this.title="",this.description="",this.code="",this.price="",this.stock="",this.category="",this.getProducts()),n.data}catch(t){console.log("create product fails"),console.error(t)}return{status:!1,message:"Product creation error"}},async updateProduct(a){if(a===this.pidForUpdate){let t={title:this.titleUpdate,description:this.descriptionUpdate,code:this.codeUpdate,price:this.priceUpdate,stock:this.stockUpdate,category:this.categoryUpdate,status:!0,thumbnails:[]};try{const n=`http:localhost:8080/api/products/${a}`,r=await h.put(n,t);return r&&r.data.status==!0&&(this.pidForUpdate="",this.titleUpdate="",this.descriptionUpdate="",this.codeUpdate="",this.priceUpdate="",this.stockUpdate="",this.categoryUpdate="",this.getProducts()),r.data}catch(n){if(console.log("update products fails"),console.error(n),n.response.data)return n.response.data}}else console.error("PIDS NOT MATCH ERROR");return{status:!1,message:"Product update error"}},async getProducts(){console.log("calling get products (admin)");try{const a="http:localhost:8080/api/products",t=await h.get(a);this.products=await t.data}catch(a){console.log("request get all products fails"),console.log(a)}},async getProductsFiltered(a){let t=1;a=="NEXT"&&(t=this.products.nextPage),a=="PREV"&&(t=this.products.prevPage);const n=`http:localhost:8080/api/products?page=${t}`,r=await h.get(n);this.products=await r.data},async removeItem(a){try{const t=`http:localhost:8080/api/products/${a}`,n=await h.delete(t);return n&&n.data.status==!0&&this.getProducts(),n.data}catch(t){if(console.error(t),t.response.data)return t.response.data}return{status:!1,message:"Delete product fail"}},async updateUser(a){if(a===this.userpidForUpdate){let t={profile_name:this.userProfileNameForUpdate,role:this.userRoleForUpdate};try{const n=`http:localhost:8080/api/users/${a}`,r=await h.put(n,t);return console.log("RESPONSE UPDATE USER"),console.log(r),r&&r.data.isvalid==!0&&(console.log("resposne is Valid!"),this.userpidForUpdate="",this.userProfileNameForUpdate="",this.userRoleForUpdate="",this.fetchAllUsers()),r.data}catch(n){if(console.log("update users fails"),console.error(n),n.response.data)return n.response.data}}else console.error("PIDS NOT MATCH ERROR");return{isValid:!1,status:!1,message:"User update error"}},async deleteAllUsers(){console.log("DELETE ALL USERS CALL");try{const a="http:localhost:8080/api/users",t=await h.delete(a);return console.log("RESPONSE DELETE ALL USERS"),console.log(t),t.data}catch(a){if(console.log("delete all users fails"),console.error(a),a.response.data)return a.response.data}},async deleteUser(a){try{const t=`http:localhost:8080/api/users/${a}`,n=await h.delete(t);return console.log("RESPONSE DELETE ONE USERS with pid "+a),console.log(n),n.data}catch(t){if(console.log("delete one users fails"),console.error(t),t.response.data)return t.response.data}}}});const l=a=>(Q("data-v-9aaba4ae"),a=a(),Y(),a),se={class:"container mx-auto px-4 sm:px-6 lg:px-8"},oe={class:"flex flex-col lg:flex-row lg:justify-between"},ie={class:"w-full lg:w-3/3"},ae={class:"flex flex-col mt-8"},le={class:"flex justify-between"},ne=l(()=>e("h2",{class:"text-lg font-medium leading-6 text-gray-900"},"Product List",-1)),re={key:0,class:"flex mt-2 mb-2 custom-success"},ce={style:{width:"95%","text-align":"center","text-transform":"uppercase"},class:"mt-2 mb-2"},de={key:0,class:"flex mt-2 mb-2 custom-error"},ue={style:{width:"90%","text-align":"center"},class:"mt-2 mb-2"},pe={class:"flex-1 mt-4"},ge={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},fe=l(()=>e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Product "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Code "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Description "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Price "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Category "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Stock "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Actions ")])],-1)),he={class:"bg-white divide-y divide-gray-200"},xe={class:"px-6 py-4 whitespace-nowrap"},_e={class:"flex items-center"},ye={class:"flex-shrink-0 w-10 h-10"},we=["src"],ve={class:"ml-4"},be={class:"text-sm font-medium text-gray-900"},Ue={class:"px-6 py-4 whitespace-nowrap"},ke={class:"text-sm text-gray-900"},Ee={class:"px-6 py-4 whitespace-nowrap"},Pe={class:"text-sm text-gray-900"},Se={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"text-sm text-gray-900"},Re={class:"px-6 py-4 whitespace-nowrap"},Te={class:"text-sm text-gray-900"},Ae={class:"px-6 py-4 whitespace-nowrap"},Le={class:"text-sm text-gray-900"},Fe={class:"px-6 py-4 whitespace-nowrap"},qe={style:{"justify-content":"space-evenly"},class:"flex"},Oe=["onClick"],Be=l(()=>e("svg",{class:"w-4 h-4 fill-current","enable-background":"new 0 0 128 128",height:"20px",id:"Layer_1",version:"1.1",viewBox:"0 0 128 128",width:"128px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[e("g",null,[e("path",{d:"M18.233,81.666l-0.016,0.003c0.006,0.012,0.01,0.022,0.016,0.036c0.008,0.101,0.026,0.195,0.04,0.293   c0.002,0.017,0,0.029,0.002,0.045l3.929,25.514c0.476,3.098,3.374,5.221,6.47,4.743c3.098-0.476,5.222-3.372,4.746-6.471   l-0.611-3.965c0.712,0.587,1.43,1.169,2.175,1.714c10.106,7.42,23.111,10.987,36.486,8.926c13.372-2.056,24.702-9.37,32.109-19.487   c3.662-4.988,6.353-10.695,7.922-16.793l-15.479-4.262c-1.044,4.191-2.882,8.109-5.405,11.552   c-5.012,6.824-12.566,11.713-21.593,13.105c-9.027,1.388-17.705-1.002-24.536-6.004c-0.841-0.616-1.645-1.282-2.424-1.976   l4.488,0.435c2.872,0.276,5.445-2.025,5.748-5.144c0.3-3.12-1.783-5.873-4.655-6.15l-23.659-2.291   c-2.568-0.248-4.884,1.572-5.564,4.188c-0.05,0.185-0.076,0.374-0.109,0.565c-0.021,0.132-0.061,0.255-0.074,0.39   c-0.004,0.041,0.002,0.077-0.001,0.114c-0.013,0.174-0.004,0.351-0.002,0.528C18.235,81.406,18.224,81.539,18.233,81.666z",fill:"#232323"}),e("path",{d:"M109.767,46.334l0.015-0.002c-0.006-0.013-0.01-0.024-0.016-0.037c-0.008-0.1-0.027-0.195-0.04-0.293   c-0.002-0.015,0-0.029-0.002-0.044l-3.928-25.513c-0.477-3.097-3.373-5.221-6.472-4.744c-3.097,0.477-5.221,3.373-4.744,6.47   l0.612,3.967c-0.715-0.587-1.433-1.169-2.177-1.715c-10.106-7.419-23.112-10.989-36.484-8.926   c-13.374,2.055-24.703,9.371-32.109,19.487c-3.664,4.989-6.355,10.696-7.922,16.794l15.479,4.26   c1.042-4.19,2.882-8.108,5.403-11.551c5.012-6.824,12.569-11.712,21.595-13.105c9.027-1.386,17.703,1.002,24.536,6.002   c0.841,0.618,1.645,1.284,2.423,1.976l-4.487-0.434c-2.872-0.278-5.445,2.026-5.747,5.144c-0.303,3.119,1.782,5.873,4.653,6.15   l23.659,2.291c2.568,0.248,4.884-1.572,5.564-4.188c0.05-0.184,0.076-0.374,0.107-0.565c0.022-0.132,0.063-0.255,0.075-0.391   c0.006-0.038-0.003-0.075,0-0.112c0.014-0.175,0.007-0.353,0.003-0.53C109.764,46.595,109.774,46.462,109.767,46.334z",fill:"#232323"})])],-1)),Me=[Be],Ne=["onClick"],De=l(()=>e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM6.3 6.3a1 1 0 011.4 0L10 8.6l2.3-2.3a1 1 0 011.4 1.4L11.4 10l2.3 2.3a1 1 0 01-1.4 1.4L10 11.4l-2.3 2.3a1 1 0 01-1.4-1.4L8.6 10 6.3 7.7a1 1 0 010-1.4z"})],-1)),$e=[De],Ve={key:0,class:"bg-gray-100 pt-4"},je={class:"flex justify-center"},Ke={key:1,class:"bg-gray-100 pt-4"},ze={class:"flex justify-center"},Ie={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center"},Xe=l(()=>e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),He={class:"space-y-12"},We=l(()=>e("div",{class:"border-b border-gray-900/10 pb-12"},[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"NEW PRODUCT")],-1)),Ge={class:"border-b border-gray-900/10 pb-12"},Je={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},Qe={class:"sm:col-span-3"},Ye=l(()=>e("label",{for:"title",class:"block text-sm font-medium leading-6 text-gray-900"},"Title",-1)),Ze={class:"mt-2"},et={class:"sm:col-span-3"},tt=l(()=>e("label",{for:"description",class:"block text-sm font-medium leading-6 text-gray-900"},"Description",-1)),st={class:"mt-2"},ot={class:"sm:col-span-4"},it=l(()=>e("label",{for:"code",class:"block text-sm font-medium leading-6 text-gray-900"},"Code",-1)),at={class:"mt-2"},lt={class:"sm:col-span-3"},nt=l(()=>e("label",{for:"category",class:"block text-sm font-medium leading-6 text-gray-900"},"Category",-1)),rt={class:"mt-2"},ct=l(()=>e("option",null,"Nike",-1)),dt=l(()=>e("option",null,"Adidas",-1)),ut=l(()=>e("option",null,"Puma",-1)),pt=[ct,dt,ut],gt={class:"col-span-full"},mt=l(()=>e("label",{for:"stock",class:"block text-sm font-medium leading-6 text-gray-900"},"Stock",-1)),ft={class:"mt-2"},ht={class:"sm:col-span-2 sm:col-start-1"},xt=l(()=>e("label",{for:"price",class:"block text-sm font-medium leading-6 text-gray-900"},"Price",-1)),_t={class:"mt-2"},yt={class:"sm:col-span-2 sm:col-start-1"},wt=l(()=>e("label",{for:"file",class:"block text-sm font-medium leading-6 text-gray-900"},"Images",-1)),vt={class:"mt-2"},bt={class:"flex justify-between mt-6"},Ut={key:0,class:"flex mt-2 mb-2 custom-error"},kt={style:{width:"90%","text-align":"center"},class:"mt-2 mb-2"},Et={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center"},Pt=l(()=>e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),St={class:"space-y-12"},Ct=l(()=>e("div",{class:"border-b border-gray-900/10 pb-12"},[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"UPDATE PRODUCT")],-1)),Rt={class:"border-b border-gray-900/10 pb-12"},Tt={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},At={class:"sm:col-span-3"},Lt=l(()=>e("label",{for:"title",class:"block text-sm font-medium leading-6 text-gray-900"},"Title",-1)),Ft={class:"mt-2"},qt={class:"sm:col-span-3"},Ot=l(()=>e("label",{for:"description",class:"block text-sm font-medium leading-6 text-gray-900"},"Description",-1)),Bt={class:"mt-2"},Mt={class:"sm:col-span-4"},Nt=l(()=>e("label",{for:"code",class:"block text-sm font-medium leading-6 text-gray-900"},"Code",-1)),Dt={class:"mt-2"},$t={class:"sm:col-span-3"},Vt=l(()=>e("label",{for:"category",class:"block text-sm font-medium leading-6 text-gray-900"},"Category",-1)),jt={class:"mt-2"},Kt=l(()=>e("option",null,"Nike",-1)),zt=l(()=>e("option",null,"Adidas",-1)),It=l(()=>e("option",null,"Puma",-1)),Xt=[Kt,zt,It],Ht={class:"col-span-full"},Wt=l(()=>e("label",{for:"stock",class:"block text-sm font-medium leading-6 text-gray-900"},"Stock",-1)),Gt={class:"mt-2"},Jt={class:"sm:col-span-2 sm:col-start-1"},Qt=l(()=>e("label",{for:"price",class:"block text-sm font-medium leading-6 text-gray-900"},"Price",-1)),Yt={class:"mt-2"},Zt={class:"flex justify-between mt-6"},es={key:0,class:"flex mt-2 mb-2 custom-error"},ts={style:{width:"90%","text-align":"center"},class:"mt-2 mb-2"},ss={key:2,class:"container mx-auto px-4 sm:px-6 lg:px-8 p-4"},os={class:"flex flex-col lg:flex-row lg:justify-between"},is={class:"w-full lg:w-3/3"},as={class:"flex flex-col mt-8"},ls={class:"flex justify-between"},ns=l(()=>e("h2",{class:"text-lg font-medium leading-6 text-gray-900"},"Users List",-1)),rs={class:"flex-1 mt-4"},cs={class:"overflow-x-auto"},ds={class:"min-w-full divide-y divide-gray-200"},us=l(()=>e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Username "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Profile Name "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Role "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase"}," Actions ")])],-1)),ps={class:"bg-white divide-y divide-gray-200"},gs={class:"px-6 py-4 whitespace-nowrap"},ms={class:"text-sm text-gray-900"},fs={class:"px-6 py-4 whitespace-nowrap"},hs={class:"text-sm text-gray-900"},xs={class:"px-6 py-4 whitespace-nowrap"},_s={class:"text-sm text-gray-900"},ys={class:"px-6 py-4 whitespace-nowrap"},ws={style:{"justify-content":"space-evenly"},class:"flex"},vs=["onClick"],bs=l(()=>e("svg",{class:"w-4 h-4 fill-current","enable-background":"new 0 0 128 128",height:"20px",id:"Layer_1",version:"1.1",viewBox:"0 0 128 128",width:"128px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[e("g",null,[e("path",{d:"M18.233,81.666l-0.016,0.003c0.006,0.012,0.01,0.022,0.016,0.036c0.008,0.101,0.026,0.195,0.04,0.293   c0.002,0.017,0,0.029,0.002,0.045l3.929,25.514c0.476,3.098,3.374,5.221,6.47,4.743c3.098-0.476,5.222-3.372,4.746-6.471   l-0.611-3.965c0.712,0.587,1.43,1.169,2.175,1.714c10.106,7.42,23.111,10.987,36.486,8.926c13.372-2.056,24.702-9.37,32.109-19.487   c3.662-4.988,6.353-10.695,7.922-16.793l-15.479-4.262c-1.044,4.191-2.882,8.109-5.405,11.552   c-5.012,6.824-12.566,11.713-21.593,13.105c-9.027,1.388-17.705-1.002-24.536-6.004c-0.841-0.616-1.645-1.282-2.424-1.976   l4.488,0.435c2.872,0.276,5.445-2.025,5.748-5.144c0.3-3.12-1.783-5.873-4.655-6.15l-23.659-2.291   c-2.568-0.248-4.884,1.572-5.564,4.188c-0.05,0.185-0.076,0.374-0.109,0.565c-0.021,0.132-0.061,0.255-0.074,0.39   c-0.004,0.041,0.002,0.077-0.001,0.114c-0.013,0.174-0.004,0.351-0.002,0.528C18.235,81.406,18.224,81.539,18.233,81.666z",fill:"#232323"}),e("path",{d:"M109.767,46.334l0.015-0.002c-0.006-0.013-0.01-0.024-0.016-0.037c-0.008-0.1-0.027-0.195-0.04-0.293   c-0.002-0.015,0-0.029-0.002-0.044l-3.928-25.513c-0.477-3.097-3.373-5.221-6.472-4.744c-3.097,0.477-5.221,3.373-4.744,6.47   l0.612,3.967c-0.715-0.587-1.433-1.169-2.177-1.715c-10.106-7.419-23.112-10.989-36.484-8.926   c-13.374,2.055-24.703,9.371-32.109,19.487c-3.664,4.989-6.355,10.696-7.922,16.794l15.479,4.26   c1.042-4.19,2.882-8.108,5.403-11.551c5.012-6.824,12.569-11.712,21.595-13.105c9.027-1.386,17.703,1.002,24.536,6.002   c0.841,0.618,1.645,1.284,2.423,1.976l-4.487-0.434c-2.872-0.278-5.445,2.026-5.747,5.144c-0.303,3.119,1.782,5.873,4.653,6.15   l23.659,2.291c2.568,0.248,4.884-1.572,5.564-4.188c0.05-0.184,0.076-0.374,0.107-0.565c0.022-0.132,0.063-0.255,0.075-0.391   c0.006-0.038-0.003-0.075,0-0.112c0.014-0.175,0.007-0.353,0.003-0.53C109.764,46.595,109.774,46.462,109.767,46.334z",fill:"#232323"})])],-1)),Us=[bs],ks=["onClick"],Es=l(()=>e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM6.3 6.3a1 1 0 011.4 0L10 8.6l2.3-2.3a1 1 0 011.4 1.4L11.4 10l2.3 2.3a1 1 0 01-1.4 1.4L10 11.4l-2.3 2.3a1 1 0 01-1.4-1.4L8.6 10 6.3 7.7a1 1 0 010-1.4z"})],-1)),Ps=[Es],Ss={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center"},Cs=l(()=>e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),Rs={class:"space-y-12"},Ts=l(()=>e("div",{class:"border-b border-gray-900/10 pb-12"},[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"UPDATE USER")],-1)),As={class:"border-b border-gray-900/10 pb-12"},Ls={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},Fs={class:"sm:col-span-3"},qs=l(()=>e("label",{for:"Profile name",class:"block text-sm font-medium leading-6 text-gray-900"},"Profile name",-1)),Os={class:"mt-2"},Bs={class:"sm:col-span-3"},Ms=l(()=>e("label",{for:"User role",class:"block text-sm font-medium leading-6 text-gray-900"},"Role",-1)),Ns={class:"mt-2"},Ds=l(()=>e("option",null,"premium",-1)),$s=l(()=>e("option",null,"user",-1)),Vs=[Ds,$s],js={class:"flex justify-between mt-6"},Ks={__name:"AdminView",setup(a){const t=te(),n=G();x(0);let r=x(!1),w=x(!1),f=null,L=x(!1),E=x(!1),v=x(!1),F="",P="",b="",U=x(!1);t.getProducts(),console.log(n.user.role),n.user.role=="admin"&&t.fetchAllUsers();async function M(c){f=await t.products.payload.find(s=>s._id==c),f?(t.pidForUpdate=f.id,t.titleUpdate=f.title,t.descriptionUpdate=f.description,t.codeUpdate=f.code,t.categoryUpdate=f.category,t.priceUpdate=f.price,t.stockUpdate=f.stock,w.value=!0):Swal.fire({title:"Error!",text:"Ups, product with "+c+" not found for update!",icon:"error",confirmButtonText:"OK"})}async function N(c){const s=await t.removeItem(c);s.status==!0?Swal.fire({title:"Success!",text:s.message,icon:"success",confirmButtonText:"OK"}):Swal.fire({title:"Error!",text:s.message,icon:"error",confirmButtonText:"OK"})}async function D(c,s,o){console.log("MODAL UPDATE USER CALL"),console.log(c,s,o),c?(t.userpidForUpdate=c,t.userProfileNameForUpdate=s,t.userRoleForUpdate=o,U.value=!0):Swal.fire({title:"Error!",text:"Ups, user with "+c+" not found for update!",icon:"error",confirmButtonText:"OK"})}async function $(c){console.log("delete user for uid ",c);const s=await t.deleteUser(c);s.isvalid==!0?(Swal.fire({title:"Success!",text:s.message,icon:"success",confirmButtonText:"OK"}),t.fetchAllUsers()):Swal.fire({title:"Error!",text:s.message,icon:"error",confirmButtonText:"OK"})}async function V(){const c=t;Swal.fire({title:"Do you want to delete all users that have been not connection in the past two days?",showCancelButton:!0,confirmButtonText:"DELETE"}).then(async s=>{if(s.isConfirmed){const o=await c.deleteAllUsers();console.log("res isvalid",o.isvalid),o.isvalid==!0?Swal.fire({title:"Success!",icon:"success",text:o.message,confirmButtonText:"OK"}):Swal.fire({title:"Error!",icon:"error",text:o.message?o.message:"Ups. the operation fails",confirmButtonText:"OK"}),c.fetchAllUsers()}})}async function j(c){console.log("UPDATE USER CALL FOR ",c);const s=await t.updateUser(c);s.isvalid==!0?(U.value=!1,Swal.fire({title:"Success!",icon:"success",text:s.message,confirmButtonText:"OK"})):(console.log(s.message),Swal.fire({title:"Error!",icon:"error",text:s.message?s.message:"Unknown error updating user",confirmButtonText:"OK"}),this.store.fetchAllUsers())}async function K(c){const s=await t.updateProduct(c);s.status==!0?(w.value=!1,Swal.fire({title:"Success!",icon:"success",text:s.message,confirmButtonText:"OK"})):(console.log(s.message),Swal.fire({title:"Error!",icon:"error",text:s.message,confirmButtonText:"OK"}))}async function z(){const c=await t.createNewProduct();c.status==!0?(r.value=!1,Swal.fire({title:"Success!",icon:"success",text:c.message,confirmButtonText:"OK"})):(console.log(c.message),Swal.fire({title:"Error!",icon:"error",text:c.message,confirmButtonText:"OK"}))}function I(){L.value=!1,F=""}function X(){E.value=!1,P=""}function q(){v.value=!1,b=""}function O(){r.value=!1,w.value=!1,E.value=!1,v.value=!1,b="",P=""}function H(){r.value=!1,w.value=!1,U.value=!1,E.value=!1,v.value=!1,b="",P=""}return(c,s)=>(p(),g(T,null,[k(Z),e("div",se,[e("div",oe,[e("div",ie,[e("div",ae,[e("div",le,[ne,e("button",{onClick:s[0]||(s[0]=o=>J(r)?r.value=!i(r):r=!i(r)),class:"mt-4 bg-gray-800 p-4 text-white text-center py-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-50"}," NEW PRODUCT ")]),k(C,{name:"fade",duration:{enter:"1000",leave:"2000"}},{default:S(()=>[i(L)?(p(),g("div",re,[e("div",ce,d(i(F)),1),e("button",{style:{width:"5%"},class:"",onClick:I},"X")])):y("",!0)]),_:1}),k(C,{name:"fade",duration:{enter:"1000",leave:"2000"}},{default:S(()=>[i(E)?(p(),g("div",de,[e("div",ue,d(i(P)),1),e("button",{style:{width:"10%"},class:"",onClick:X},"X")])):y("",!0)]),_:1}),e("div",pe,[e("div",ge,[e("table",me,[fe,e("tbody",he,[(p(!0),g(T,null,B(i(t).products.payload,o=>(p(),g("tr",null,[e("td",xe,[e("div",_e,[e("div",ye,[e("img",{class:"w-full h-full object-contain rounded-md",src:o.thumbnails?o.thumbnails[0]:"",alt:""},null,8,we)]),e("div",ve,[e("div",be,d(o.title),1)])])]),e("td",Ue,[e("div",ke,d(o.code),1)]),e("td",Ee,[e("div",Pe,d(o.description),1)]),e("td",Se,[e("div",Ce,d(o.price),1)]),e("td",Re,[e("div",Te,d(o.category),1)]),e("td",Ae,[e("div",Le,d(o.stock),1)]),e("td",Fe,[e("div",qe,[e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R=>M(o._id),"aria-label":"Update item"},Me,8,Oe),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R=>N(o._id),"aria-label":"Remove item"},$e,8,Ne)])])]))),256))])])])])])])])]),i(t).products&&i(t).products.payload?(p(),g("section",Ve,[e("div",je,[e("button",{class:_(i(t).products.hasPrevPage?"flex items-center justify-center rounded-md bg-gray-900 px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-blue-300":"flex items-center justify-center rounded-md bg-gray-900 px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-blue-300 disabled-opacity-50"),onClick:s[1]||(s[1]=o=>i(t).getProductsFiltered("PREV"))},"PREV",2),e("button",{class:_(i(t).products.hasNextPage?"flex items-center justify-center rounded-md bg-gray-900 px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-blue-300":"flex items-center justify-center rounded-md bg-gray-900 px-5 py-2.5 text-center text-sm font-medium text-white focus:outline-none focus:ring-4 focus:ring-blue-300 disabled-opacity-50"),onClick:s[2]||(s[2]=o=>i(t).getProductsFiltered("NEXT"))},"NEXT",2)])])):y("",!0),i(t).products&&i(t).products.payload?(p(),g("section",Ke,[e("div",ze,[e("span",null,"PAGE: "+d(i(t).products.page),1)])])):y("",!0),e("div",{class:_([i(r)?"scale-100":"","fixed scale-0 z-10 inset-0 overflow-y-auto"])},[e("div",Ie,[Xe,e("div",{class:_([i(r)?"scale-100":"","transform scale-0 transition-transform duration-300 relative z-10 w-full max-w-md p-6 bg-white rounded-lg shadow-lg"])},[e("div",He,[We,e("div",Ge,[e("div",Je,[e("div",Qe,[Ye,e("div",Ze,[u(e("input",{required:"required","onUpdate:modelValue":s[3]||(s[3]=o=>i(t).title=o),type:"text",name:"title",id:"title",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[m,i(t).title]])])]),e("div",et,[tt,e("div",st,[u(e("input",{required:"required","onUpdate:modelValue":s[4]||(s[4]=o=>i(t).description=o),type:"text",name:"description",id:"description",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[m,i(t).description]])])]),e("div",ot,[it,e("div",at,[u(e("input",{required:"required","onUpdate:modelValue":s[5]||(s[5]=o=>i(t).code=o),id:"code",name:"code",type:"text",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[m,i(t).code]])])]),e("div",lt,[nt,e("div",rt,[u(e("select",{required:"required","onUpdate:modelValue":s[6]||(s[6]=o=>i(t).category=o),id:"category",name:"category",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},pt,512),[[A,i(t).category]])])]),e("div",gt,[mt,e("div",ft,[u(e("input",{required:"required","onUpdate:modelValue":s[7]||(s[7]=o=>i(t).stock=o),type:"number",name:"stock",id:"stock",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[m,i(t).stock]])])]),e("div",ht,[xt,e("div",_t,[u(e("input",{required:"required","onUpdate:modelValue":s[8]||(s[8]=o=>i(t).price=o),type:"number",step:"0.01",name:"price",id:"price",class:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline6"},null,512),[[m,i(t).price]])])]),e("div",yt,[wt,e("div",vt,[e("input",{type:"file",multiple:"",onChange:s[9]||(s[9]=(...o)=>i(t).handleFileUpload&&i(t).handleFileUpload(...o))},null,32)])])])])]),e("div",bt,[e("button",{onClick:s[10]||(s[10]=o=>z()),class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," CREATE "),e("button",{onClick:O,class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," BACK ")]),k(C,{name:"fade",duration:{enter:"1000",leave:"2000"}},{default:S(()=>[i(v)?(p(),g("div",Ut,[e("div",kt,d(i(b)),1),e("button",{style:{width:"10%"},class:"",onClick:q},"X")])):y("",!0)]),_:1})],2)])],2),e("div",{class:_([i(w)?"scale-100":"","fixed scale-0 z-10 inset-0 overflow-y-auto"])},[e("div",Et,[Pt,e("div",{class:_([i(w)?"scale-100":"","transform scale-0 transition-transform duration-300 relative z-10 w-full max-w-md p-6 bg-white rounded-lg shadow-lg"])},[e("div",St,[Ct,e("div",Rt,[e("div",Tt,[e("div",At,[Lt,e("div",Ft,[u(e("input",{required:"required","onUpdate:modelValue":s[11]||(s[11]=o=>i(t).titleUpdate=o),type:"text",name:"title",id:"title",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,i(t).titleUpdate]])])]),e("div",qt,[Ot,e("div",Bt,[u(e("input",{required:"required","onUpdate:modelValue":s[12]||(s[12]=o=>i(t).descriptionUpdate=o),type:"text",name:"description",id:"description",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,i(t).descriptionUpdate]])])]),e("div",Mt,[Nt,e("div",Dt,[u(e("input",{required:"required","onUpdate:modelValue":s[13]||(s[13]=o=>i(t).codeUpdate=o),id:"code",name:"code",type:"text",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,i(t).codeUpdate]])])]),e("div",$t,[Vt,e("div",jt,[u(e("select",{required:"required","onUpdate:modelValue":s[14]||(s[14]=o=>i(t).categoryUpdate=o),id:"category",name:"category",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"},Xt,512),[[A,i(t).categoryUpdate]])])]),e("div",Ht,[Wt,e("div",Gt,[u(e("input",{required:"required","onUpdate:modelValue":s[15]||(s[15]=o=>i(t).stockUpdate=o),type:"number",name:"stock",id:"stock",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,i(t).stockUpdate]])])]),e("div",Jt,[Qt,e("div",Yt,[u(e("input",{required:"required","onUpdate:modelValue":s[16]||(s[16]=o=>i(t).priceUpdate=o),type:"number",step:"0.01",name:"price",id:"price",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,i(t).priceUpdate]])])])])])]),e("div",Zt,[e("button",{onClick:s[17]||(s[17]=o=>K(i(t).pidForUpdate)),class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," UPDATE "),e("button",{onClick:O,class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," BACK ")]),k(C,{name:"fade",duration:{enter:"1000",leave:"2000"}},{default:S(()=>[i(v)?(p(),g("div",es,[e("div",ts,d(i(b)),1),e("button",{style:{width:"10%"},class:"",onClick:q},"X")])):y("",!0)]),_:1})],2)])],2),i(n).user.role=="admin"?(p(),g("div",ss,[e("div",os,[e("div",is,[e("div",as,[e("div",ls,[ns,e("button",{onClick:s[18]||(s[18]=o=>V()),class:"mt-4 bg-gray-800 p-4 text-white text-center py-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-50"}," DELETE ALL USERS ")]),e("div",rs,[e("div",cs,[e("table",ds,[us,e("tbody",ps,[(p(!0),g(T,null,B(i(t).users,o=>(p(),g("tr",null,[e("td",gs,[e("div",ms,d(o.username),1)]),e("td",fs,[e("div",hs,d(o.profile_name),1)]),e("td",xs,[e("div",_s,d(o.role),1)]),e("td",ys,[e("div",ws,[e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R=>D(o.uid,o.profile_name,o.role),"aria-label":"Update User"},Us,8,vs),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:R=>$(o.uid),"aria-label":"Remove User"},Ps,8,ks)])])]))),256))])])])])])])])])):y("",!0),e("div",{class:_([i(U)?"scale-100":"","fixed scale-0 z-10 inset-0 overflow-y-auto"])},[e("div",Ss,[Cs,e("div",{class:_([i(U)?"scale-100":"","transform scale-0 transition-transform duration-300 relative z-10 w-full max-w-md p-6 bg-white rounded-lg shadow-lg"])},[e("div",Rs,[Ts,e("div",As,[e("div",Ls,[e("div",Fs,[qs,e("div",Os,[u(e("input",{required:"required","onUpdate:modelValue":s[19]||(s[19]=o=>i(t).userProfileNameForUpdate=o),type:"text",name:"profile_name",id:"profile_name",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[m,i(t).userProfileNameForUpdate]])])]),e("div",Bs,[Ms,e("div",Ns,[u(e("select",{required:"required","onUpdate:modelValue":s[20]||(s[20]=o=>i(t).userRoleForUpdate=o),id:"user_role",name:"User role",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"},Vs,512),[[A,i(t).userRoleForUpdate]])])])])])]),e("div",js,[e("button",{onClick:s[21]||(s[21]=o=>j(i(t).userpidForUpdate)),class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," UPDATE "),e("button",{onClick:H,class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:ring focus:ring-green-500"}," BACK ")])],2)])],2)],64))}},Hs=ee(Ks,[["__scopeId","data-v-9aaba4ae"]]);export{Hs as default};
